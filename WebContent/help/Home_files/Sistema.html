<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Sistema</title>
	<meta name='Generator' content='Zim 0.63'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

		span.insen { color: grey                }

		.pages {
			max-width: 1000px;
			 padding-left: 320px;
		}
		.menu{
			float:left; width: 300px;
		}
		hr{clear:both;}
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <a href='./Prenotazioni.html'>Prev</a> ]

	[ <span class='insen'>Index</span> ]

	[ <span class='insen'>Next</span> ]
</div>

<hr />

<div class="menu">
<ul>
<li><a href="file:///C:/Users/mauro.MESIS/workspace/booking/WebContent/help/Home.html" title="Home" class="page">Home</a>
<ul>
<li><a href="./Entity_Relations.html" title="Entity Relations" class="page">Entity Relations</a></li>
<li><a href="./Prenotazioni.html" title="Prenotazioni" class="page">Prenotazioni</a></li>
<li><b>Sistema</b></li>
</ul></li>
</ul>

</div>

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>Sistema <a name='Home:Sistema'></a></h1>
	</div>

	<div class='content'>
	<p>
Created martedì 29 dicembre 2015
</p>

<br>

<h2>Tecnologia usata</h2>

<br>

<p>
java 1.7<br>
Eclipse		Platform 	(c) Copyright Eclipse contributors and others 2000, 2015.  All rights reserved. Version: 4.4.2.v20150204-1700<br>
MySQL	v.5.6<br>
tomcat v.8.0<br>
jstl-1.2<br>
mysql-connector-java-5.1.23<br>
taglibs-standard-impl-1.2.5
</p>

<br>

<h2>Step di sviluppo</h2>

<br>

<p>
<img src="./Sistema/diagram001.png">
</p>

<br>

<h2>CRUD</h2>

<br>

<p>
per la parte CRUD (Create Read Update Delete) delle tabelle
</p>

<p>
org.mf.model.<i>tabella</i>.java<br>
org.mf.controller.<i>tabella</i>Controller.java<br>
org.mf.controller.<i>tabella</i>Dao.java<br>
WebContent/list<i>tabella</i>.jsp<br>
WebContent/<i>tabella</i>.jsp
</p>

<h2>Sottosistemi</h2>

<br>

<h3>sicurezza (account)</h3>

<p>
<div style='padding-left: 30pt'>
AuthenticationFilter.java<br>
LoginServlet.java<br>
LogoutServlet.java<br>
login.html<br>
LoginSuccess.jsp
</div>
</p>

<br>

<h3>logging</h3>

<p>
<div style='padding-left: 30pt'>
RequestLoggingFilter.java
</div>
</p>

<br>

<h3>grafica</h3>

<p>
Sitemesh v.2
</p>

<h3>internazionalizzazione</h3>

<p>
Java Standard Tag Library (jstl)
</p>

<h3>logging</h3>

<p>
filtri di tomcat<br>
junit ??
</p>

<p>
jquery<br>
bootstrap
</p>

<p>
internationalization<br>
<div style='padding-left: 30pt'>
taglibs-standard-impl-1.2.5<br>
Message.properties<br>
Message_ES.properties<br>
Message_ENproperties
</div>
</p>
<div class="zim-object">
<pre class="brush: asp;">
1&nbsp;&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
2&nbsp;&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;
3&nbsp;
4&nbsp;&lt;c:set var="language" value="${not empty param.language ? param.language : not empty language ? language : pageContext.request.locale}" scope="session" /&gt;
5&nbsp;&lt;fmt:setLocale value="${language}" /&gt;
6&nbsp;&lt;fmt:setBundle basename="booking.i18n.Message" var="lang" /&gt;
7&nbsp;
8&nbsp;&lt;html &gt;
9&nbsp;&lt;head&gt;
10&nbsp;&lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"&gt;
11&nbsp;&lt;title&gt;i18n&lt;/title&gt;
12&nbsp;&lt;/head&gt;
13&nbsp;&lt;body&gt;
14&nbsp;	&lt;fmt:message key="login.label.username" bundle="${lang}"/&gt;
15&nbsp;&lt;/body&gt;
16&nbsp;&lt;/html&gt;
</pre>
</div>

<br>

<h2>Filtri</h2>

<br>

<p>
All'interno del file di configurazione di tomcat WEB-INF/web.xml c'è il seguente codice per la definizione dei filtri gestiti da tomcat
</p>

<div class="zim-object">
<pre class="brush: xml;">
1&nbsp;&lt;filter&gt;
2&nbsp;	&lt;filter-name&gt;RequestLoggingFilter&lt;/filter-name&gt;
3&nbsp;	&lt;filter-class&gt;org.mf.filter.RequestLoggingFilter&lt;/filter-class&gt;
4&nbsp;&lt;/filter&gt;
5&nbsp;
6&nbsp;&lt;filter&gt;
7&nbsp;	&lt;filter-name&gt;AuthenticationFilter&lt;/filter-name&gt;
8&nbsp;	&lt;filter-class&gt;org.mf.filter.AuthenticationFilter&lt;/filter-class&gt;
9&nbsp;&lt;/filter&gt;
10&nbsp;
11&nbsp;&lt;filter-mapping&gt;
12&nbsp;	&lt;filter-name&gt;RequestLoggingFilter&lt;/filter-name&gt;
13&nbsp;	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
14&nbsp;	&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
15&nbsp;&lt;/filter-mapping&gt;
16&nbsp;&lt;filter-mapping&gt;
17&nbsp;	&lt;filter-name&gt;AuthenticationFilter&lt;/filter-name&gt;
18&nbsp;	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
19&nbsp;&lt;/filter-mapping&gt;
20&nbsp;
21&nbsp;&lt;filter&gt;
22&nbsp;  &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;
23&nbsp;  &lt;filter-class&gt;com.opensymphony.sitemesh.webapp.SiteMeshFilter&lt;/filter-class&gt;
24&nbsp;&lt;/filter&gt;
25&nbsp;
26&nbsp;&lt;filter-mapping&gt;
27&nbsp;  &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;
28&nbsp;  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
29&nbsp;&lt;/filter-mapping&gt;</pre>
</div>

<br>

<p>
Il codice definisce due filtri, identificati da tomcat con RequestLoggingFilter e AuthenticationFilter (nomi di fantasia). Con questa definizione, tomcat, si fa carico di mandare in esecuzione le classi corrispondenti (rispettivamente booking.filter.RequestLoggingFilter e booking.filter.AuthenticationFilter)  ogni qual volta c'è una richiesta che soddisfa il pattern definito all'interno del tag filter-mapping.
</p>

<p>
Il filtro chiamato RequestLoggingFilter è utilizzato per alimentare un log con le varie richieste ricevute, mentre il filtro AuthenticationFilter è usato per verificare se la sessione ha un account valido, nel qual caso non fa nulla , diversamente, dirotta la richiesta verso la form login che chiede i dati di account, l'action di questa form richiama una servlet (LoginServlet) che si fa carico di verificare le credenziali (utente e password), quindi se non sono corrette, ritorna alla form per una nuova richiesta, diversamente crea la sessione con le informazioni (id utente) per successive necessita (verifica sessione valida, utente che sta usando il sistema) dopo di che viene viene richiesto l'url di una jsp per il saluto di benvenuto (LoginSuccess.jsp).<br>
E' prevista anche una servlet (LogoutServlet) che ha lo scopo di eseguire il logout, questo viene fatto invalidando la sessione e  richiamando la form per un nuovo account login.html
</p>

<h2>Servlet</h2>

<p>
Le servlet non sono definite con il file web.xml, ma vengono definite attraverso javax.servlet.annotation.WebServlet all'interno del codice java , questa modalità risulta essere più semplice e diretta.
</p>

<p>
Esempio di servlet con utilizzo di annotazioni <span class="zim-tag">@WebServlet</span>("/LogoutServlet") : 
</p>

<div class="zim-object">
<pre class="brush: java;">
1&nbsp;package booking.servlet.session;
2&nbsp;
3&nbsp;import java.io.IOException;
4&nbsp;
5&nbsp;import javax.servlet.ServletException;
6&nbsp;import javax.servlet.annotation.WebServlet;
7&nbsp;import javax.servlet.http.HttpServlet;
8&nbsp;import javax.servlet.http.HttpServletRequest;
9&nbsp;import javax.servlet.http.HttpServletResponse;
10&nbsp;import javax.servlet.http.HttpSession;
11&nbsp;
12&nbsp;@WebServlet("/LogoutServlet")
13&nbsp;public class LogoutServlet extends HttpServlet {
14&nbsp;
15&nbsp;	private static final long serialVersionUID = -1;
16&nbsp;    
17&nbsp;    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
18&nbsp;        response.setContentType("text/html");
19&nbsp;        HttpSession session = request.getSession(false);
20&nbsp;        if(session != null){
21&nbsp;            session.invalidate();
22&nbsp;        }
23&nbsp;        response.sendRedirect("login.html");
24&nbsp;    }
25&nbsp;}</pre>
</div>

<br>
<br>
<br>


	</div>

	<br />

	<div class='page-footer'>
		<b>Backlinks:</b>

		<a href='file:///C:/Users/mauro.MESIS/workspace/booking/WebContent/help/Home.html'>Home</a>

		<br /><br />

			<b>Attachments:</b>
			<table>

			<tr><td><a href='./Sistema/diagram.dot'>diagram.dot</a></td><td>&nbsp;</td><td>528b</td></tr>


			<tr><td><a href='./Sistema/diagram.png'>diagram.png</a></td><td>&nbsp;</td><td>42.7kb</td></tr>


			<tr><td><a href='./Sistema/diagram001.dot'>diagram001.dot</a></td><td>&nbsp;</td><td>834b</td></tr>


			<tr><td><a href='./Sistema/diagram001.png'>diagram001.png</a></td><td>&nbsp;</td><td>41.2kb</td></tr>

			</table>
	</div>

	

</div>

</body>
</html>
